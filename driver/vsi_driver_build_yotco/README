Instructions to build for petalinux 2016.4/yotco:

Navigate to the petalinux project and source the petalinux settings.

Create a template module.

petalinux-create --type modules --name vsidriver --enable
	**The name must be lowercase and must not contain special characters**

Download and copy vsi_driver_yotco_2016_4.tar.gz into the following directory within your petalinux project:

<petalinux-project>/project-spec/meta-user/recipes-modules/vsidriver/vsidriver/


Extract the tarball:

tar xvzf vsi_driver_yotco_2016_4.tar.gz
Modify <petalinux-project>/project-spec/meta-user/recipe-modules/vsidriver/vsidriver.bb as shown below:
SRC_URI should look like:
SRC_URI = "file://Makefile \
           	file://sv_driver.c \
	file://sv_driver.h \
 	file://${ARCH}/support_funcs.o_shipped \
 	file://COPYING \
	â€œ

And append the following to the end:
inherit module
EXTRA_OEMAKE = 'KERNEL_SRC="${STAGING_KERNEL_DIR}" \
            	O=${STAGING_KERNEL_BUILDDIR} \
            	'


Clean, build, install the module and build petalinux:
petalinux-build -c vsidriver -x do_clean

petalinux-build -c vsidriver -x do_build

petalinux-build -c vsidriver -x do_install

petalinux-build
The driver will now be in the filesystem at: 

/lib/modules/<version>-xilinx/extra/vsi_driver.ko




Petalinux 2016.4 module build reference - https://www.xilinx.com/support/answers/68441.html


